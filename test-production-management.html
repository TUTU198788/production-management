<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿäº§æ•°æ®ç®¡ç†åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            color: #1f2937;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        h1 {
            color: #059669;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-info {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .test-info h3 {
            color: #3b82f6;
            margin: 0 0 15px 0;
        }
        
        .test-info ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .test-info li {
            margin: 8px 0;
        }
        
        .big-button {
            background: #059669;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            width: calc(33.33% - 20px);
            box-sizing: border-box;
        }
        
        .big-button:hover {
            background: #047857;
        }
        
        .big-button.secondary {
            background: #3b82f6;
        }
        
        .big-button.secondary:hover {
            background: #2563eb;
        }
        
        .big-button.warning {
            background: #f59e0b;
        }
        
        .big-button.warning:hover {
            background: #d97706;
        }
        
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px dashed #e5e7eb;
            border-radius: 12px;
            background: #f9fafb;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
        }
        
        .metric-card::after {
            content: 'ç‚¹å‡»ç®¡ç†';
            position: absolute;
            bottom: 8px;
            right: 12px;
            font-size: 10px;
            opacity: 0.8;
        }
        
        .metric-content h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            opacity: 0.9;
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-unit {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .metric-subtitle {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .result {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .success {
            background: #ecfdf5;
            border: 2px solid #059669;
            color: #059669;
        }
        
        .info {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            color: #3b82f6;
        }
        
        .warning {
            background: #fffbeb;
            border: 2px solid #f59e0b;
            color: #f59e0b;
        }
        
        .error {
            background: #fef2f2;
            border: 2px solid #dc2626;
            color: #dc2626;
        }
        
        .data-summary {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .data-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-radius: 4px;
        }
        
        .data-label {
            font-weight: 500;
            color: #374151;
        }
        
        .data-value {
            color: #059669;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ç”Ÿäº§æ•°æ®ç®¡ç†åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-info">
            <h3>ğŸ§ª åŠŸèƒ½æµ‹è¯•è¯´æ˜</h3>
            <ul>
                <li><strong>ç‚¹å‡»å·²ç”Ÿäº§é‡å¡ç‰‡</strong>ï¼šæµ‹è¯•å¡ç‰‡ç‚¹å‡»äº‹ä»¶å’Œæ¨¡æ€æ¡†æ‰“å¼€</li>
                <li><strong>æŸ¥çœ‹ç”Ÿäº§è®°å½•</strong>ï¼šæ˜¾ç¤ºæ‰€æœ‰ç”Ÿäº§è®°å½•çš„è¯¦ç»†ä¿¡æ¯</li>
                <li><strong>ç¼–è¾‘ç”Ÿäº§è®°å½•</strong>ï¼šä¿®æ”¹ç”Ÿäº§æ•°é‡ã€æ—¥æœŸã€å¤‡æ³¨ç­‰ä¿¡æ¯</li>
                <li><strong>åˆ é™¤ç”Ÿäº§è®°å½•</strong>ï¼šå•ä¸ªåˆ é™¤æˆ–æ‰¹é‡åˆ é™¤ç”Ÿäº§è®°å½•</li>
                <li><strong>ç­›é€‰å’Œæœç´¢</strong>ï¼šæŒ‰è§„æ ¼ã€åŒºåŸŸç­›é€‰ï¼Œæ”¯æŒå…³é”®è¯æœç´¢</li>
                <li><strong>æ•°æ®å¯¼å‡º</strong>ï¼šå¯¼å‡ºç”Ÿäº§è®°å½•ä¸ºJSONæ ¼å¼</li>
            </ul>
        </div>
        
        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
            <button class="big-button" onclick="testProductionCard()">
                ğŸ“Š æµ‹è¯•å·²ç”Ÿäº§é‡å¡ç‰‡
            </button>
            
            <button class="big-button secondary" onclick="checkProductionData()">
                ğŸ” æ£€æŸ¥ç”Ÿäº§æ•°æ®
            </button>
            
            <button class="big-button warning" onclick="openMainPage()">
                ğŸ  æ‰“å¼€ä¸»é¡µé¢
            </button>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ¯ æ¨¡æ‹Ÿå·²ç”Ÿäº§é‡å¡ç‰‡</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„å¡ç‰‡æ¥æµ‹è¯•ç”Ÿäº§æ•°æ®ç®¡ç†åŠŸèƒ½ï¼š</p>
            
            <div class="metric-card" onclick="simulateProductionManagement()">
                <div class="metric-content">
                    <h3>å·²ç”Ÿäº§é‡</h3>
                    <div class="metric-value" id="demoProducedValue">0</div>
                    <div class="metric-unit">ç±³ (m)</div>
                    <div class="metric-subtitle">ç´¯è®¡å®Œæˆç”Ÿäº§</div>
                </div>
            </div>
        </div>
        
        <div class="data-summary" id="dataSummary" style="display: none;">
            <h4>ğŸ“‹ å½“å‰ç”Ÿäº§æ•°æ®æ¦‚è§ˆ</h4>
            <div id="dataItems">
                <!-- æ•°æ®é¡¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
        
        <div id="results"></div>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('results');
            const result = document.createElement('div');
            result.className = 'result ' + type;
            result.innerHTML = message;
            resultsDiv.appendChild(result);
        }
        
        function testProductionCard() {
            addResult('ğŸ¯ æµ‹è¯•å·²ç”Ÿäº§é‡å¡ç‰‡ç‚¹å‡»åŠŸèƒ½...', 'info');
            
            // æ£€æŸ¥æ˜¯å¦æœ‰ç”Ÿäº§æ•°æ®
            const productionData = localStorage.getItem('productionData');
            if (!productionData) {
                addResult('âŒ æ²¡æœ‰æ‰¾åˆ°ç”Ÿäº§æ•°æ®ï¼Œè¯·å…ˆåœ¨ä¸»é¡µé¢æ·»åŠ ä¸€äº›ç”Ÿäº§æ•°æ®', 'error');
                return;
            }
            
            try {
                const data = JSON.parse(productionData);
                const producedItems = data.filter(item => item.produced > 0);
                
                if (producedItems.length === 0) {
                    addResult('âš ï¸ æ²¡æœ‰å·²ç”Ÿäº§çš„æ•°æ®ï¼Œè¯·å…ˆåœ¨ä¸»é¡µé¢æ·»åŠ ä¸€äº›ç”Ÿäº§è®°å½•', 'warning');
                    return;
                }
                
                addResult(`âœ… æ‰¾åˆ° ${producedItems.length} ä¸ªå·²ç”Ÿäº§é¡¹ç›®`, 'success');
                addResult('ğŸ’¡ è¯·åœ¨ä¸»é¡µé¢ç‚¹å‡»"å·²ç”Ÿäº§é‡"å¡ç‰‡æ¥æµ‹è¯•åŠŸèƒ½', 'info');
                
            } catch (error) {
                addResult(`âŒ æ•°æ®è§£æå¤±è´¥ï¼š${error.message}`, 'error');
            }
        }
        
        function checkProductionData() {
            addResult('ğŸ” æ£€æŸ¥ç”Ÿäº§æ•°æ®ç»“æ„...', 'info');
            
            const productionData = localStorage.getItem('productionData');
            if (!productionData) {
                addResult('âŒ æ²¡æœ‰æ‰¾åˆ°ç”Ÿäº§æ•°æ®', 'error');
                return;
            }
            
            try {
                const data = JSON.parse(productionData);
                let totalProduced = 0;
                let recordsWithProduction = 0;
                let recordsWithDetails = 0;
                
                data.forEach(item => {
                    if (item.produced > 0) {
                        totalProduced += item.produced;
                        recordsWithProduction++;
                        
                        if (item.productionRecords && Array.isArray(item.productionRecords)) {
                            recordsWithDetails++;
                        }
                    }
                });
                
                // æ›´æ–°æ¼”ç¤ºå¡ç‰‡
                document.getElementById('demoProducedValue').textContent = totalProduced;
                
                // æ˜¾ç¤ºæ•°æ®æ¦‚è§ˆ
                const dataSummary = document.getElementById('dataSummary');
                const dataItems = document.getElementById('dataItems');
                
                dataItems.innerHTML = `
                    <div class="data-item">
                        <span class="data-label">æ€»è®°å½•æ•°</span>
                        <span class="data-value">${data.length}</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">æœ‰ç”Ÿäº§æ•°æ®çš„è®°å½•</span>
                        <span class="data-value">${recordsWithProduction}</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">æœ‰è¯¦ç»†ç”Ÿäº§è®°å½•çš„é¡¹ç›®</span>
                        <span class="data-value">${recordsWithDetails}</span>
                    </div>
                    <div class="data-item">
                        <span class="data-label">æ€»ç”Ÿäº§æ•°é‡</span>
                        <span class="data-value">${totalProduced} æ ¹</span>
                    </div>
                `;
                
                dataSummary.style.display = 'block';
                
                addResult(`âœ… æ•°æ®æ£€æŸ¥å®Œæˆï¼`, 'success');
                addResult(`ğŸ“Š å…± ${data.length} æ¡è®°å½•ï¼Œå…¶ä¸­ ${recordsWithProduction} æ¡æœ‰ç”Ÿäº§æ•°æ®`, 'info');
                addResult(`ğŸ”§ ${recordsWithDetails} æ¡è®°å½•æœ‰è¯¦ç»†çš„ç”Ÿäº§è®°å½•`, 'info');
                
            } catch (error) {
                addResult(`âŒ æ•°æ®æ£€æŸ¥å¤±è´¥ï¼š${error.message}`, 'error');
            }
        }
        
        function simulateProductionManagement() {
            addResult('ğŸ¯ æ¨¡æ‹Ÿç‚¹å‡»å·²ç”Ÿäº§é‡å¡ç‰‡...', 'info');
            addResult('ğŸ’¡ è¿™é‡Œæ¨¡æ‹Ÿäº†å¡ç‰‡ç‚¹å‡»äº‹ä»¶ï¼Œå®é™…åŠŸèƒ½è¯·åœ¨ä¸»é¡µé¢æµ‹è¯•', 'info');
            addResult('ğŸ“‹ ç”Ÿäº§æ•°æ®ç®¡ç†åŠŸèƒ½åŒ…æ‹¬ï¼š', 'info');
            addResult('â€¢ æŸ¥çœ‹æ‰€æœ‰ç”Ÿäº§è®°å½•çš„è¯¦ç»†ä¿¡æ¯', 'info');
            addResult('â€¢ ç¼–è¾‘ç”Ÿäº§æ•°é‡ã€æ—¥æœŸã€å¤‡æ³¨', 'info');
            addResult('â€¢ å•ä¸ªåˆ é™¤æˆ–æ‰¹é‡åˆ é™¤è®°å½•', 'info');
            addResult('â€¢ æŒ‰è§„æ ¼ã€åŒºåŸŸç­›é€‰æ•°æ®', 'info');
            addResult('â€¢ æœç´¢å’Œåˆ†é¡µæµè§ˆ', 'info');
            addResult('â€¢ å¯¼å‡ºç”Ÿäº§è®°å½•æ•°æ®', 'info');
        }
        
        function openMainPage() {
            window.open('index.html', '_blank');
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥æ•°æ®
        window.onload = function() {
            setTimeout(checkProductionData, 500);
        };
    </script>
</body>
</html>
